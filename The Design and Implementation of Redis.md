

## 第二章 简单字符串

简单字符串 sds simple dynamic string

| int len      | int free       | char buff [] |
| ------------ | -------------- | ------------ |
|              |                |              |
| 记录当前长度 | 记录未使用长度 | 保存字符串   |

SDS 与 C 字符串的区别：

| SDs                                   | C                                     |
| ------------------------------------- | ------------------------------------- |
| 获取字符串长度复杂度为 O(1)           | 获取字符串长度复杂度为 O(1)           |
| API 安全不会产生缓冲区溢出            | API 不安全有可能产生缓冲区溢出        |
| 修改字符串长度最多需要执行N次内存分配 | 修改字符串长度必然需要执行N次内存分配 |
| 可以保存文本或者二进制数据            | 只能保存文本数据                      |
| 可以使用一部分 string.h 库中的函数    | 可以使用全部 string.h 库中的函数      |

SDS 空间分配策略：

	1. 空间预分配（len小于1MB，free = len；len 大于等于1MB，free = 1MB）
	1. 惰性空间释放（第一时间不释放 free）



---

## 第三章 链表